// src/styles/components/UI-elements/_assigneePopover.scss

@use "@/styles/variables";
@use "@/styles/mixins";
@use "@/styles/base";

.assignee-popover-content {
	background-color: variables.$color-neutral-3;
	border-radius: variables.$border-radius-lg;
	box-shadow: variables.$shadow-lg;
	padding: variables.$space-sm;
	max-width: 280px; // Slightly wider for search input
	min-width: 250px; // Ensure minimum width
	z-index: 103;
	display: flex;
	flex-direction: column;
	gap: variables.$space-xs;
	animation: contentShow 150ms cubic-bezier(0.16, 1, 0.3, 1);

	.assignee-popover-header {
		display: flex;
		flex-direction: column; // Stack input and clear button if needed
		gap: variables.$spacing-unit; // Gap between input and clear button
		padding-bottom: variables.$space-xs;
		border-bottom: 1px solid variables.$color-neutral-4;
		margin-bottom: variables.$space-xs;

		.assignee-search-input {
			width: 100%;
			padding: variables.$spacing-unit variables.$space-xs;
			border: 1px solid variables.$color-neutral-4;
			border-radius: variables.$border-radius;
			background-color: variables.$color-neutral-4;
			color: variables.$color-neutral-1;
			font-size: 15px;
			outline: none;

			&::placeholder {
				color: variables.$color-neutral-2;
			}

			&:focus {
				border-color: variables.$color-primary-4;
				box-shadow: 0 0 0 1px variables.$color-primary-4;
			}
		}

		.assignee-clear-button {
			background: none;
			border: none;
			color: variables.$color-primary-4;
			cursor: pointer;
			// FIX: Replaced @extend base.text-body-xs with direct properties
			font-size: 13px; // From base.text-body-xs
			line-height: 22px; // From base.text-body-xs
			letter-spacing: 0.25px; // From base.text-body-xs
			padding: 0;
			align-self: flex-end; // Align clear button to the right
			&:hover {
				text-decoration: underline;
			}
		}
	}

	.assignee-list {
		display: flex;
		flex-direction: column;
		gap: variables.$space-sm;
		max-height: 250px; // Limit height and enable scrolling
		overflow-y: auto; // Enable vertical scrolling
		padding-right: 5px; // Add some padding for scrollbar

		// Custom scrollbar for webkit browsers
		&::-webkit-scrollbar {
			width: 8px;
		}
		&::-webkit-scrollbar-track {
			background: variables.$color-neutral-4;
			border-radius: 4px;
		}
		&::-webkit-scrollbar-thumb {
			background: variables.$color-neutral-2;
			border-radius: 4px;
		}
		&::-webkit-scrollbar-thumb:hover {
			background: variables.$color-primary-4;
		}

		.assignee-message {
			color: variables.$color-neutral-2;
			padding: variables.$spacing-unit;
			text-align: center;
			font-size: 14px;

			&--error {
				color: variables.$color-primary-4;
			}
		}

		.assignee-item {
			@include mixins.flex-center;
			justify-content: flex-start;
			gap: variables.$spacing-unit;
			background-color: transparent;
			color: variables.$color-neutral-1;
			padding: variables.$space-sm variables.$space-sm;
			border-radius: variables.$border-radius;
			font-size: 15px;
			cursor: pointer;
			transition:
				background-color 0.15s ease,
				color 0.15s ease;
			border: none;
			width: 100%;

			&:hover {
				background-color: variables.$color-neutral-4;
			}

			&--selected {
				background-color: variables.$color-neutral-5;
				color: variables.$color-primary-4;
			}

			.avatar {
				flex-shrink: 0;
			}

			.assignee-name {
				flex-grow: 1;
				text-align: left;
			}
		}
	}
}

.assignee-popover-arrow {
	fill: variables.$color-neutral-3;
}

@keyframes contentShow {
	from {
		opacity: 0;
		transform: translate(-50%, -48%) scale(0.96);
	}
	to {
		opacity: 1;
		transform: translate(-50%, -50%) scale(1);
	}
}
